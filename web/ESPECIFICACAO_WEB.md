# ESPECIFICAÃ‡ÃƒO TÃ‰CNICA - PAINEL WEB
## Sistema de Agendamento de DiligÃªncias - CartÃ³rio TubarÃ£o

---

## ğŸ“‹ VISÃƒO GERAL

| Item | Valor |
|------|-------|
| **Nome do Sistema** | Sistema de Agendamento de DiligÃªncias |
| **Cliente** | 2Âº Tabelionato de Notas e Protestos de TubarÃ£o - CartÃ³rio Beira Rio |
| **URL de ProduÃ§Ã£o** | cartorio.seumotoristavip.com.br |
| **Tipo** | Painel Web Responsivo (Desktop First) |

---

## ğŸ› ï¸ STACK TECNOLÃ“GICO

```
Frontend:
â”œâ”€â”€ Next.js 14 (App Router)
â”œâ”€â”€ TypeScript
â”œâ”€â”€ TailwindCSS
â”œâ”€â”€ Lucide React (Ã­cones)
â””â”€â”€ React Hook Form + Zod (formulÃ¡rios)

Backend:
â”œâ”€â”€ Next.js API Routes
â”œâ”€â”€ Supabase (PostgreSQL + Realtime)
â””â”€â”€ Resend (emails transacionais)

Infraestrutura:
â”œâ”€â”€ Vercel (hospedagem)
â”œâ”€â”€ Supabase (banco de dados)
â””â”€â”€ APIs externas (ViaCEP, Brasil API)
```

---

## ğŸ” AUTENTICAÃ‡ÃƒO

### EspecificaÃ§Ã£o
- **Tipo**: Senha Ãºnica compartilhada
- **Senha**: `123`
- **Armazenamento**: Hash bcrypt no servidor
- **SessÃ£o**: Cookie HTTP-only (expira ao fechar navegador)
- **ProteÃ§Ã£o**: Rate limiting (5 tentativas por minuto)

### ImplementaÃ§Ã£o
```typescript
// Fluxo de autenticaÃ§Ã£o
1. UsuÃ¡rio digita senha
2. POST /api/auth/login { password: "123" }
3. Servidor valida hash bcrypt
4. Se vÃ¡lido: Set-Cookie com session token
5. Redirect para /dashboard
```

---

## ğŸ“… REGRAS DE NEGÃ“CIO

### Dias e HorÃ¡rios

| Regra | Valor |
|-------|-------|
| **Dias de funcionamento** | Segunda a Sexta |
| **HorÃ¡rio de funcionamento** | 9h Ã s 17h |
| **HorÃ¡rios de diligÃªncia** | 09:15 (manhÃ£) e 15:00 (tarde) |
| **Feriados bloqueados** | Nacionais + Estaduais (SC) |

### Agendamento

| Regra | DescriÃ§Ã£o |
|-------|-----------|
| **Janela de agendamento** | Somente das 9h Ã s 17h |
| **Data mÃ­nima** | PrÃ³ximo dia Ãºtil |
| **Slots por horÃ¡rio** | MÃ¡ximo 1 agendamento |
| **Conflito simultÃ¢neo** | Primeiro a salvar ganha o slot |

### Cancelamento

| PerÃ­odo | Prazo Limite |
|---------|--------------|
| **DiligÃªncia manhÃ£ (9:15)** | AtÃ© 8:30 do dia |
| **DiligÃªncia tarde (15:00)** | AtÃ© 14:30 do dia |

### ValidaÃ§Ãµes de Conflito
```typescript
// Quando dois escreventes tentam o mesmo slot simultaneamente
if (slotOcupado) {
  return {
    error: true,
    message: `O escrevente ${nomeEscrevente} jÃ¡ reservou esse horÃ¡rio, por favor escolha uma nova data e um novo horÃ¡rio.`
  }
}
```

---

## ğŸ¨ DESIGN SYSTEM

### Paleta de Cores

```css
:root {
  /* Cores Principais */
  --azul-marinho: #1a365d;
  --azul-escuro: #2c5282;
  --azul-medio: #3182ce;
  --dourado: #d69e2e;
  --dourado-claro: #ecc94b;
  
  /* Cores de Status */
  --verde-sucesso: #38a169;
  --vermelho-erro: #e53e3e;
  --amarelo-aviso: #dd6b20;
  --cinza-desabilitado: #a0aec0;
  
  /* Cores de Background */
  --bg-glass: rgba(255, 255, 255, 0.1);
  --bg-glass-hover: rgba(255, 255, 255, 0.15);
  --border-glass: rgba(255, 255, 255, 0.2);
}
```

### Estilo Visual

| Elemento | EspecificaÃ§Ã£o |
|----------|---------------|
| **Estilo geral** | Glassmorphism (vidro fosco) |
| **Background** | Gradiente azul animado |
| **Cards** | Fundo translÃºcido com blur |
| **Bordas** | Sutis, rgba branco 20% |
| **Sombras** | Suaves, elevaÃ§Ã£o sutil |
| **Cantos** | Arredondados (8-16px) |

### Background Animado
```css
.animated-background {
  background: linear-gradient(
    -45deg, 
    #1a365d, 
    #2c5282, 
    #3182ce, 
    #1a365d
  );
  background-size: 400% 400%;
  animation: gradientShift 15s ease infinite;
}

@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
```

### Glassmorphism
```css
.glass-card {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 16px;
}
```

### Tipografia
```css
/* Fonte principal */
font-family: 'Inter', sans-serif;

/* Hierarquia */
h1: 2rem (32px) - Bold
h2: 1.5rem (24px) - Semibold
h3: 1.25rem (20px) - Medium
body: 1rem (16px) - Regular
small: 0.875rem (14px) - Regular
```

---

## ğŸ“± ESTRUTURA DE TELAS

### Mapa de NavegaÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FLUXO DE TELAS                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  [LOGIN] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚     â”‚                                                  â”‚    â”‚
â”‚     â–¼                                                  â”‚    â”‚
â”‚  [DASHBOARD] â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚     â”‚                                                  â”‚    â”‚
â”‚     â”œâ”€â”€ Tab: CalendÃ¡rio                                â”‚    â”‚
â”‚     â”œâ”€â”€ Tab: Agendamentos                              â”‚    â”‚
â”‚     â”œâ”€â”€ Tab: Recibos                                   â”‚    â”‚
â”‚     â””â”€â”€ Tab: HistÃ³rico                                 â”‚    â”‚
â”‚           â”‚                                            â”‚    â”‚
â”‚           â–¼                                            â”‚    â”‚
â”‚     [NOVO AGENDAMENTO]                                 â”‚    â”‚
â”‚           â”‚                                            â”‚    â”‚
â”‚           â–¼                                            â”‚    â”‚
â”‚     [CONFIRMAÃ‡ÃƒO]                                      â”‚    â”‚
â”‚           â”‚                                            â”‚    â”‚
â”‚           â–¼                                            â”‚    â”‚
â”‚     [SUCESSO] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### TELA 1: LOGIN (`/`)

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚                     [LOGO CARTÃ“RIO]                         â”‚
â”‚                                                             â”‚
â”‚            2Âº Tabelionato de Notas e Protestos              â”‚
â”‚                   CartÃ³rio Beira Rio                        â”‚
â”‚                                                             â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚              â”‚  â€¢â€¢â€¢â€¢â€¢â€¢                 â”‚                    â”‚
â”‚              â”‚  Senha                  â”‚                    â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                             â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚              â”‚        ENTRAR           â”‚                    â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                             â”‚
â”‚           Uso exclusivo do CartÃ³rio TubarÃ£o                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Componentes:**
- Logo do cartÃ³rio (topo)
- TÃ­tulo: "2Âº Tabelionato de Notas e Protestos"
- SubtÃ­tulo: "CartÃ³rio Beira Rio"
- Input senha (type="password", mÃ¡scara)
- BotÃ£o "Entrar" (dourado)
- RodapÃ©: "Uso exclusivo do CartÃ³rio TubarÃ£o"

**Comportamento:**
- Enter no campo senha = submit
- Erro: shake animation + mensagem "Senha incorreta"
- Sucesso: redirect para /dashboard

---

### TELA 2: DASHBOARD (`/dashboard`)

**Layout com Tabs:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [LOGO]  Sistema de Agendamento              [Sair]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚CalendÃ¡rioâ”‚ Agendamentos â”‚ Recibos  â”‚ HistÃ³rico â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚              [CONTEÃšDO DA ABA ATIVA]                â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### ABA: CALENDÃRIO

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  â—„  Dezembro 2025  â–º                                â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚  Dom  Seg  Ter  Qua  Qui  Sex  SÃ¡b                  â”‚    â”‚
â”‚  â”‚   -    1    2    3    4    5    -                   â”‚    â”‚
â”‚  â”‚   -    8    9   10   11   12    -                   â”‚    â”‚
â”‚  â”‚   -   15   16   17   18   19    -                   â”‚    â”‚
â”‚  â”‚   -   22   23   24   25   26    -                   â”‚    â”‚
â”‚  â”‚   -   29   30   31    -    -    -                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸŸ¢ DisponÃ­vel  ğŸŸ¡ Parcial  ğŸ”´ Ocupado  âš« Bloqueado â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚         â”‚   + NOVO AGENDAMENTO       â”‚                      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Cores dos Dias:**
| Cor | Significado |
|-----|-------------|
| ğŸŸ¢ Verde | Ambos horÃ¡rios disponÃ­veis |
| ğŸŸ¡ Amarelo | Um horÃ¡rio ocupado |
| ğŸ”´ Vermelho | Ambos horÃ¡rios ocupados |
| âš« Cinza | Fim de semana, feriado ou motorista indisponÃ­vel |

**Modal ao Clicar no Dia:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ğŸ“… 09 de Dezembro            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  09:15  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚         â”‚ ğŸŸ¢ DisponÃ­vel        â”‚    â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                     â”‚
â”‚  15:00  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚         â”‚ ğŸ”´ JoÃ£o Silva        â”‚    â”‚
â”‚         â”‚ Rua das Flores, 123  â”‚    â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                     â”‚
â”‚         [Fechar]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### ABA: AGENDAMENTOS

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  Filtro: [Todos â–¼]  [Este mÃªs â–¼]           ğŸ” Buscar...     â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ“… 09/12/2025 - 09:15                    [Cancelar] â”‚    â”‚
â”‚  â”‚ ğŸ‘¤ Maria Santos                                     â”‚    â”‚
â”‚  â”‚ ğŸ“ Rua das Flores, 123 - Centro                     â”‚    â”‚
â”‚  â”‚ ğŸ·ï¸ Agendado                                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ“… 09/12/2025 - 15:00                               â”‚    â”‚
â”‚  â”‚ ğŸ‘¤ JoÃ£o Silva                                       â”‚    â”‚
â”‚  â”‚ ğŸ“ Av. Principal, 456 - Bairro                      â”‚    â”‚
â”‚  â”‚ ğŸ·ï¸ ConcluÃ­do âœ…                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ“… 08/12/2025 - 09:15                               â”‚    â”‚
â”‚  â”‚ ğŸ‘¤ Pedro Oliveira                                   â”‚    â”‚
â”‚  â”‚ ğŸ“ Travessa Sul, 789                                â”‚    â”‚
â”‚  â”‚ ğŸ·ï¸ Cancelado âŒ                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Status e Cores:**
| Status | Cor | Ãcone |
|--------|-----|-------|
| Agendado | Azul (#3182ce) | ğŸ”µ |
| ConcluÃ­do | Verde (#38a169) | âœ… |
| Cancelado | Vermelho (#e53e3e) | âŒ |

**BotÃ£o Cancelar:**
- VisÃ­vel apenas se status = "agendado"
- Habilitado apenas dentro do prazo (manhÃ£<8:30 / tarde<14:30)
- Se fora do prazo: botÃ£o desabilitado com tooltip "Prazo de cancelamento expirado"

**Modal de Cancelamento:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        âš ï¸ Confirmar Cancelamento    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  Tem certeza que deseja cancelar    â”‚
â”‚  esta diligÃªncia?                   â”‚
â”‚                                     â”‚
â”‚  ğŸ“… 09/12/2025 Ã s 09:15             â”‚
â”‚  ğŸ‘¤ Maria Santos                    â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Voltar  â”‚    â”‚  Cancelar   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### ABA: RECIBOS

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  Filtro por data: [01/12/2025] atÃ© [31/12/2025]  [Filtrar]  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ“… 09/12/2025                           [Download]  â”‚    â”‚
â”‚  â”‚ ğŸ‘¤ Maria Santos                                     â”‚    â”‚
â”‚  â”‚ ğŸ“ Rua das Flores, 123 - Centro                     â”‚    â”‚
â”‚  â”‚ ğŸ’° R$ 80,00                                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ“… 08/12/2025                                       â”‚    â”‚
â”‚  â”‚ ğŸ‘¤ JoÃ£o Silva                                       â”‚    â”‚
â”‚  â”‚ ğŸ“ Av. Principal, 456 - Bairro                      â”‚    â”‚
â”‚  â”‚ â³ Aguardando recibo...                             â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ”„ Recibo sendo confeccionado.              â”‚   â”‚    â”‚
â”‚  â”‚  â”‚    Enviaremos email quando estiver pronto.  â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Estados do Recibo:**
| Estado | Visual |
|--------|--------|
| DisponÃ­vel | BotÃ£o "Download" ativo |
| Aguardando | Mensagem animada "Recibo sendo confeccionado..." |

**AnimaÃ§Ã£o "Confeccionando":**
```css
.loading-message {
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}
```

---

#### ABA: HISTÃ“RICO (Log)

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  ğŸ“‹ HistÃ³rico de AÃ§Ãµes                                      â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ• 09/12/2025 14:32                                 â”‚    â”‚
â”‚  â”‚ ğŸ‘¤ Maria Santos                                     â”‚    â”‚
â”‚  â”‚ âœï¸ Agendou diligÃªncia para 10/12/2025 Ã s 09:15      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ• 09/12/2025 10:15                                 â”‚    â”‚
â”‚  â”‚ ğŸ‘¤ JoÃ£o Silva                                       â”‚    â”‚
â”‚  â”‚ âŒ Cancelou diligÃªncia de 09/12/2025 Ã s 15:00       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ• 08/12/2025 16:45                                 â”‚    â”‚
â”‚  â”‚ ğŸ‘¤ Pedro Oliveira                                   â”‚    â”‚
â”‚  â”‚ âœï¸ Agendou diligÃªncia para 09/12/2025 Ã s 09:15      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚                    [Carregar mais...]                       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Tipos de AÃ§Ã£o:**
| AÃ§Ã£o | Ãcone | DescriÃ§Ã£o |
|------|-------|-----------|
| Agendamento criado | âœï¸ | "Agendou diligÃªncia para [data] Ã s [hora]" |
| Agendamento cancelado | âŒ | "Cancelou diligÃªncia de [data] Ã s [hora]" |

---

### TELA 3: NOVO AGENDAMENTO (`/dashboard/novo`)

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  â—„ Voltar                    Novo Agendamento               â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  Nome do Escrevente *                               â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚                                             â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  Data da DiligÃªncia *                               â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚  ğŸ“… Selecionar data...                      â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  HorÃ¡rio *                                          â”‚    â”‚
â”‚  â”‚  â—‹ 09:15 (ManhÃ£)    â—‹ 15:00 (Tarde)                 â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  CEP *                                              â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  [Buscar]                         â”‚    â”‚
â”‚  â”‚  â”‚              â”‚                                   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  EndereÃ§o (preenchido automaticamente)              â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚  Rua das Flores, Centro, TubarÃ£o - SC       â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  NÃºmero *                                           â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚    â”‚
â”‚  â”‚  â”‚              â”‚                                   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  InformaÃ§Ãµes Adicionais                             â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚                                             â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                             â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚    â”‚
â”‚  â”‚           â”‚       REVISAR          â”‚                â”‚    â”‚
â”‚  â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Campos e ValidaÃ§Ãµes:**

| Campo | Tipo | ObrigatÃ³rio | ValidaÃ§Ã£o |
|-------|------|-------------|-----------|
| Nome do Escrevente | text | Sim | MÃ­nimo 3 caracteres |
| Data | date picker | Sim | Apenas dias Ãºteis futuros |
| HorÃ¡rio | radio | Sim | 09:15 ou 15:00 |
| CEP | text + mask | Sim | Formato 00000-000, vÃ¡lido via ViaCEP |
| EndereÃ§o | text (readonly) | Auto | Preenchido via ViaCEP |
| NÃºmero | text | Sim | NÃ£o vazio |
| InformaÃ§Ãµes Adicionais | textarea | NÃ£o | MÃ¡ximo 500 caracteres |

**IntegraÃ§Ã£o ViaCEP:**
```typescript
// Ao digitar CEP completo ou clicar "Buscar"
const buscarCep = async (cep: string) => {
  const response = await fetch(`https://viacep.com.br/ws/${cep}/json/`);
  const data = await response.json();
  
  if (data.erro) {
    setError("CEP nÃ£o encontrado");
    return;
  }
  
  setEndereco(`${data.logradouro}, ${data.bairro}, ${data.localidade} - ${data.uf}`);
};
```

---

### TELA 4: CONFIRMAÃ‡ÃƒO (`/dashboard/novo/confirmar`)

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  â—„ Voltar                    Confirmar Agendamento          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  ğŸ“‹ Resumo do Agendamento                           â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ‘¤ Escrevente: Maria Santos                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ“… Data: 10/12/2025                         â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ• HorÃ¡rio: 09:15 (ManhÃ£)                   â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ“ EndereÃ§o: Rua das Flores, 123            â”‚    â”‚    â”‚
â”‚  â”‚  â”‚            Centro, TubarÃ£o - SC             â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ“ Obs: Apartamento 302, interfone 32       â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚ âš ï¸ IMPORTANTE                               â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                             â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ Prazo para cancelamento:                    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ ManhÃ£ (09:15): atÃ© 8:30 do dia            â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Tarde (15:00): atÃ© 14:30 do dia           â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚    â”‚
â”‚  â”‚    â”‚  Voltar  â”‚        â”‚ Confirmar Agendamentoâ”‚     â”‚    â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### TELA 5: SUCESSO (`/dashboard/novo/sucesso`)

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚                                                             â”‚
â”‚                                                             â”‚
â”‚                         âœ…                                  â”‚
â”‚                                                             â”‚
â”‚              Agendamento realizado!                         â”‚
â”‚                                                             â”‚
â”‚        Email enviado para contato@2tt.com.br                â”‚
â”‚                                                             â”‚
â”‚                                                             â”‚
â”‚                    Deus te AbenÃ§oe                          â”‚
â”‚                                                             â”‚
â”‚                                                             â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚              â”‚   Voltar ao inÃ­cio     â”‚                     â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ BANCO DE DADOS (Supabase)

### Diagrama ER

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   agendamentos      â”‚       â”‚      recibos        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)             â”‚â—„â”€â”€â”€â”€â”€â”€â”‚ agendamento_id (FK) â”‚
â”‚ escrevente_nome     â”‚       â”‚ id (PK)             â”‚
â”‚ data                â”‚       â”‚ valor               â”‚
â”‚ horario             â”‚       â”‚ created_at          â”‚
â”‚ cep                 â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ endereco            â”‚
â”‚ numero              â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ complemento         â”‚       â”‚        logs         â”‚
â”‚ observacoes         â”‚       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ status              â”‚â—„â”€â”€â”€â”€â”€â”€â”‚ agendamento_id (FK) â”‚
â”‚ created_at          â”‚       â”‚ id (PK)             â”‚
â”‚ cancelled_at        â”‚       â”‚ acao                â”‚
â”‚ cancelled_by        â”‚       â”‚ escrevente_nome     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ detalhes            â”‚
                              â”‚ created_at          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ motorista_          â”‚
â”‚ indisponibilidades  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)             â”‚
â”‚ data (UNIQUE)       â”‚
â”‚ motivo              â”‚
â”‚ created_at          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Scripts SQL

```sql
-- =============================================
-- TABELA: agendamentos
-- =============================================
CREATE TABLE agendamentos (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  escrevente_nome VARCHAR(255) NOT NULL,
  data DATE NOT NULL,
  horario VARCHAR(5) NOT NULL CHECK (horario IN ('09:15', '15:00')),
  cep VARCHAR(9) NOT NULL,
  endereco VARCHAR(255) NOT NULL,
  numero VARCHAR(20) NOT NULL,
  complemento VARCHAR(255),
  observacoes TEXT,
  status VARCHAR(20) DEFAULT 'agendado' CHECK (status IN ('agendado', 'concluido', 'cancelado')),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  cancelled_at TIMESTAMP WITH TIME ZONE,
  cancelled_by VARCHAR(255),
  
  -- Constraint: apenas 1 agendamento por data+horario
  UNIQUE(data, horario)
);

-- Ãndices para performance
CREATE INDEX idx_agendamentos_data ON agendamentos(data);
CREATE INDEX idx_agendamentos_status ON agendamentos(status);
CREATE INDEX idx_agendamentos_data_horario ON agendamentos(data, horario);

-- =============================================
-- TABELA: motorista_indisponibilidades
-- =============================================
CREATE TABLE motorista_indisponibilidades (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  data DATE NOT NULL UNIQUE,
  motivo VARCHAR(255),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_indisponibilidades_data ON motorista_indisponibilidades(data);

-- =============================================
-- TABELA: recibos
-- =============================================
CREATE TABLE recibos (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  agendamento_id UUID NOT NULL REFERENCES agendamentos(id) ON DELETE CASCADE,
  valor DECIMAL(10,2) NOT NULL CHECK (valor > 0),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  
  -- Constraint: apenas 1 recibo por agendamento
  UNIQUE(agendamento_id)
);

CREATE INDEX idx_recibos_agendamento ON recibos(agendamento_id);
CREATE INDEX idx_recibos_created_at ON recibos(created_at);

-- =============================================
-- TABELA: logs
-- =============================================
CREATE TABLE logs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  acao VARCHAR(50) NOT NULL CHECK (acao IN ('agendamento_criado', 'agendamento_cancelado')),
  escrevente_nome VARCHAR(255) NOT NULL,
  agendamento_id UUID REFERENCES agendamentos(id) ON DELETE SET NULL,
  detalhes TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_logs_created_at ON logs(created_at DESC);
CREATE INDEX idx_logs_acao ON logs(acao);
```

### Row Level Security (RLS)

```sql
-- Habilitar RLS
ALTER TABLE agendamentos ENABLE ROW LEVEL SECURITY;
ALTER TABLE motorista_indisponibilidades ENABLE ROW LEVEL SECURITY;
ALTER TABLE recibos ENABLE ROW LEVEL SECURITY;
ALTER TABLE logs ENABLE ROW LEVEL SECURITY;

-- PolÃ­ticas pÃºblicas (sistema usa service_role key no backend)
-- Frontend nunca acessa banco diretamente

CREATE POLICY "Allow all for service role" ON agendamentos
  FOR ALL USING (true);

CREATE POLICY "Allow all for service role" ON motorista_indisponibilidades
  FOR ALL USING (true);

CREATE POLICY "Allow all for service role" ON recibos
  FOR ALL USING (true);

CREATE POLICY "Allow all for service role" ON logs
  FOR ALL USING (true);
```

---

## ğŸ“§ EMAILS (Resend)

### ConfiguraÃ§Ã£o

```typescript
// lib/resend.ts
import { Resend } from 'resend';

export const resend = new Resend(process.env.RESEND_API_KEY);

export const EMAIL_CARTORIO = 'contato@2tt.com.br';
export const EMAIL_MOTORISTA = 'brunosena.andrade@gmail.com';
```

### Template: Novo Agendamento

```typescript
// emails/novo-agendamento.tsx
export const NovoAgendamentoEmail = ({
  escrevente,
  data,
  horario,
  endereco,
  numero,
  complemento,
}: NovoAgendamentoProps) => (
  <Html>
    <Head />
    <Body style={styles.body}>
      <Container style={styles.container}>
        <Heading style={styles.heading}>
          Nova DiligÃªncia Agendada
        </Heading>
        
        <Section style={styles.section}>
          <Text><strong>Escrevente:</strong> {escrevente}</Text>
          <Text><strong>Data:</strong> {formatDate(data)}</Text>
          <Text><strong>HorÃ¡rio:</strong> {horario}</Text>
          <Text><strong>EndereÃ§o:</strong> {endereco}, {numero}</Text>
          {complemento && (
            <Text><strong>Complemento:</strong> {complemento}</Text>
          )}
        </Section>
        
        <Hr />
        
        <Text style={styles.footer}>
          2Âº Tabelionato de Notas e Protestos de TubarÃ£o
        </Text>
      </Container>
    </Body>
  </Html>
);
```

### Template: Cancelamento

```typescript
// emails/cancelamento.tsx
export const CancelamentoEmail = ({
  escrevente,
  data,
  horario,
  endereco,
}: CancelamentoProps) => (
  <Html>
    <Head />
    <Body style={styles.body}>
      <Container style={styles.container}>
        <Heading style={styles.heading}>
          âŒ DiligÃªncia Cancelada
        </Heading>
        
        <Section style={styles.section}>
          <Text><strong>Escrevente:</strong> {escrevente}</Text>
          <Text><strong>Data:</strong> {formatDate(data)}</Text>
          <Text><strong>HorÃ¡rio:</strong> {horario}</Text>
          <Text><strong>EndereÃ§o:</strong> {endereco}</Text>
        </Section>
        
        <Hr />
        
        <Text style={styles.footer}>
          2Âº Tabelionato de Notas e Protestos de TubarÃ£o
        </Text>
      </Container>
    </Body>
  </Html>
);
```

### Template: Recibo DisponÃ­vel

```typescript
// emails/recibo-disponivel.tsx
export const ReciboDisponivelEmail = ({
  data,
  escrevente,
  valor,
}: ReciboDisponivelProps) => (
  <Html>
    <Head />
    <Body style={styles.body}>
      <Container style={styles.container}>
        <Heading style={styles.heading}>
          ğŸ“„ Recibo DisponÃ­vel
        </Heading>
        
        <Section style={styles.section}>
          <Text>
            O recibo da diligÃªncia estÃ¡ disponÃ­vel para download no sistema.
          </Text>
          <Text><strong>Data:</strong> {formatDate(data)}</Text>
          <Text><strong>Escrevente:</strong> {escrevente}</Text>
          <Text><strong>Valor:</strong> R$ {formatCurrency(valor)}</Text>
        </Section>
        
        <Section style={styles.cta}>
          <Button href="https://cartorio.seumotoristavip.com.br">
            Acessar Sistema
          </Button>
        </Section>
        
        <Hr />
        
        <Text style={styles.footer}>
          2Âº Tabelionato de Notas e Protestos de TubarÃ£o
        </Text>
      </Container>
    </Body>
  </Html>
);
```

---

## ğŸ”Œ API ROUTES

### Estrutura de Endpoints

```
/api
â”œâ”€â”€ /auth
â”‚   â””â”€â”€ POST /login          # AutenticaÃ§Ã£o
â”‚
â”œâ”€â”€ /agendamentos
â”‚   â”œâ”€â”€ GET /                # Listar agendamentos
â”‚   â”œâ”€â”€ POST /               # Criar agendamento
â”‚   â”œâ”€â”€ GET /[id]            # Obter agendamento
â”‚   â””â”€â”€ PATCH /[id]/cancelar # Cancelar agendamento
â”‚
â”œâ”€â”€ /calendario
â”‚   â””â”€â”€ GET /                # Dados do calendÃ¡rio (slots, feriados)
â”‚
â”œâ”€â”€ /recibos
â”‚   â”œâ”€â”€ GET /                # Listar recibos
â”‚   â””â”€â”€ GET /[id]/pdf        # Download PDF do recibo
â”‚
â”œâ”€â”€ /logs
â”‚   â””â”€â”€ GET /                # Listar logs
â”‚
â”œâ”€â”€ /indisponibilidades
â”‚   â”œâ”€â”€ GET /                # Listar dias indisponÃ­veis
â”‚   â”œâ”€â”€ POST /               # Marcar dia indisponÃ­vel
â”‚   â””â”€â”€ DELETE /[id]         # Remover indisponibilidade
â”‚
â””â”€â”€ /feriados
    â””â”€â”€ GET /                # Buscar feriados (Brasil API)
```

### EspecificaÃ§Ã£o dos Endpoints

#### POST /api/auth/login

```typescript
// Request
{
  password: string
}

// Response 200
{
  success: true,
  message: "Autenticado com sucesso"
}
// Set-Cookie: session=xxx; HttpOnly; Secure; SameSite=Strict

// Response 401
{
  success: false,
  error: "Senha incorreta"
}
```

#### GET /api/agendamentos

```typescript
// Query params
?status=agendado|concluido|cancelado
&dataInicio=2025-12-01
&dataFim=2025-12-31

// Response 200
{
  data: [
    {
      id: "uuid",
      escrevente_nome: "Maria Santos",
      data: "2025-12-10",
      horario: "09:15",
      endereco: "Rua das Flores, Centro, TubarÃ£o - SC",
      numero: "123",
      complemento: "Apt 302",
      observacoes: "Interfone 32",
      status: "agendado",
      created_at: "2025-12-09T14:30:00Z",
      recibo: null | { id: "uuid", valor: 80.00 }
    }
  ]
}
```

#### POST /api/agendamentos

```typescript
// Request
{
  escrevente_nome: string,
  data: string, // "2025-12-10"
  horario: "09:15" | "15:00",
  cep: string,
  endereco: string,
  numero: string,
  complemento?: string,
  observacoes?: string
}

// Response 201
{
  success: true,
  data: { id: "uuid", ... }
}

// Response 409 (Conflito)
{
  success: false,
  error: "O escrevente JoÃ£o Silva jÃ¡ reservou esse horÃ¡rio, por favor escolha uma nova data e um novo horÃ¡rio."
}

// Response 400 (ValidaÃ§Ã£o)
{
  success: false,
  error: "Agendamento sÃ³ pode ser feito das 9h Ã s 17h"
}
```

#### PATCH /api/agendamentos/[id]/cancelar

```typescript
// Request
{
  escrevente_nome: string // Quem estÃ¡ cancelando
}

// Response 200
{
  success: true,
  message: "Agendamento cancelado com sucesso"
}

// Response 400 (Fora do prazo)
{
  success: false,
  error: "Prazo de cancelamento expirado. ManhÃ£ atÃ© 8:30, tarde atÃ© 14:30."
}
```

#### GET /api/calendario

```typescript
// Query params
?mes=12&ano=2025

// Response 200
{
  dias: [
    {
      data: "2025-12-10",
      tipo: "util", // util | fimdesemana | feriado | indisponivel
      slots: {
        "09:15": { disponivel: true, agendamento: null },
        "15:00": { disponivel: false, agendamento: { id, escrevente_nome } }
      }
    }
  ],
  feriados: [
    { data: "2025-12-25", nome: "Natal" }
  ]
}
```

#### GET /api/recibos/[id]/pdf

```typescript
// Response 200
// Content-Type: application/pdf
// Content-Disposition: attachment; filename="recibo-2025-12-10.pdf"
// Binary PDF data
```

---

## ğŸ“„ GERAÃ‡ÃƒO DE PDF (Recibo)

### Biblioteca Recomendada
- **@react-pdf/renderer** (para gerar PDF no servidor)

### Estrutura do Recibo

```typescript
// lib/gerar-recibo-pdf.tsx
import { Document, Page, View, Text, Image, StyleSheet } from '@react-pdf/renderer';

const styles = StyleSheet.create({
  page: {
    backgroundColor: '#f5f0e1', // Cor de fundo bege
    padding: 40,
  },
  container: {
    border: '3px solid #d69e2e', // Borda dourada
    padding: 30,
    height: '100%',
  },
  logo: {
    width: 80,
    height: 80,
    alignSelf: 'center',
  },
  title: {
    fontSize: 28,
    fontWeight: 'bold',
    textAlign: 'center',
    marginTop: 20,
    fontFamily: 'Times-Roman',
  },
  cartorio: {
    fontSize: 12,
    textAlign: 'center',
    marginTop: 20,
  },
  servico: {
    fontSize: 11,
    textAlign: 'center',
    marginTop: 15,
    lineHeight: 1.5,
  },
  valor: {
    fontSize: 14,
    textAlign: 'center',
    marginTop: 25,
    fontStyle: 'italic',
  },
  assinatura: {
    fontSize: 24,
    textAlign: 'center',
    marginTop: 30,
    fontFamily: 'Times-Italic', // Fonte cursiva
  },
  linha: {
    borderBottom: '1px solid #333',
    width: 200,
    alignSelf: 'center',
    marginTop: 5,
  },
  rodape: {
    fontSize: 10,
    textAlign: 'center',
    marginTop: 'auto',
  }
});

export const ReciboPDF = ({ 
  data, 
  endereco, 
  valor 
}: ReciboProps) => (
  <Document>
    <Page size="A4" style={styles.page}>
      <View style={styles.container}>
        {/* Logo */}
        <Image src="/logo-seu-motorista-vip.png" style={styles.logo} />
        <Text style={{ textAlign: 'center', fontSize: 10, marginTop: 5 }}>
          SEU MOTORISTA VIP
        </Text>
        
        {/* TÃ­tulo */}
        <Text style={styles.title}>RECIBO DE TRANSPORTE</Text>
        
        {/* CartÃ³rio */}
        <Text style={styles.cartorio}>
          2Âº Tabelionato de Notas e Protestos de TubarÃ£o â€“{'\n'}
          CartÃ³rio Beira Rio{'\n'}
          R. Lauro MÃ¼ller, 500 â€“ Centro, TubarÃ£o â€“ SC
        </Text>
        
        {/* ServiÃ§o */}
        <Text style={styles.servico}>
          ServiÃ§o de transporte executado no {formatDate(data)},{'\n'}
          com origem no CartÃ³rio e destino em {endereco}{'\n'}
          com retorno ao ponto
        </Text>
        
        {/* Valor */}
        <Text style={styles.valor}>
          VALOR RECEBIDO: R$ {formatCurrency(valor)}
        </Text>
        <Text style={styles.valor}>
          FORMA DE PAGAMENTO: Dinheiro
        </Text>
        
        {/* Assinatura */}
        <Text style={styles.assinatura}>Bruno Sena</Text>
        <View style={styles.linha} />
        
        {/* RodapÃ© */}
        <Text style={styles.rodape}>
          seumotoristavip.com.br{'\n'}
          TUBARÃƒO â€“ SC
        </Text>
      </View>
    </Page>
  </Document>
);
```

---

## ğŸŒ INTEGRAÃ‡Ã•ES EXTERNAS

### ViaCEP (Busca de EndereÃ§o)

```typescript
// lib/viacep.ts
interface ViaCepResponse {
  cep: string;
  logradouro: string;
  complemento: string;
  bairro: string;
  localidade: string;
  uf: string;
  erro?: boolean;
}

export async function buscarCep(cep: string): Promise<ViaCepResponse | null> {
  const cepLimpo = cep.replace(/\D/g, '');
  
  if (cepLimpo.length !== 8) {
    return null;
  }
  
  const response = await fetch(`https://viacep.com.br/ws/${cepLimpo}/json/`);
  const data = await response.json();
  
  if (data.erro) {
    return null;
  }
  
  return data;
}

export function formatarEndereco(data: ViaCepResponse): string {
  return `${data.logradouro}, ${data.bairro}, ${data.localidade} - ${data.uf}`;
}
```

### Brasil API (Feriados)

```typescript
// lib/feriados.ts
interface Feriado {
  date: string;
  name: string;
  type: string; // national, state
}

export async function buscarFeriados(ano: number): Promise<Feriado[]> {
  const response = await fetch(
    `https://brasilapi.com.br/api/feriados/v1/${ano}`
  );
  
  const feriados: Feriado[] = await response.json();
  
  // Filtrar apenas nacionais e estaduais de SC
  return feriados.filter(f => 
    f.type === 'national' || 
    (f.type === 'state' && f.name.includes('SC'))
  );
}

export function isFeriado(data: Date, feriados: Feriado[]): boolean {
  const dataStr = data.toISOString().split('T')[0];
  return feriados.some(f => f.date === dataStr);
}
```

### Utilidades de Data

```typescript
// lib/utils/date.ts

// Verificar se Ã© dia Ãºtil
export function isDiaUtil(data: Date, feriados: string[]): boolean {
  const diaSemana = data.getDay();
  const dataStr = data.toISOString().split('T')[0];
  
  // SÃ¡bado (6) ou Domingo (0)
  if (diaSemana === 0 || diaSemana === 6) {
    return false;
  }
  
  // Verificar feriado
  if (feriados.includes(dataStr)) {
    return false;
  }
  
  return true;
}

// Obter prÃ³ximo dia Ãºtil
export function getProximoDiaUtil(feriados: string[]): Date {
  const hoje = new Date();
  const amanha = new Date(hoje);
  amanha.setDate(amanha.getDate() + 1);
  
  while (!isDiaUtil(amanha, feriados)) {
    amanha.setDate(amanha.getDate() + 1);
  }
  
  return amanha;
}

// Verificar se estÃ¡ no horÃ¡rio de funcionamento (9h-17h)
export function isDentroHorarioFuncionamento(): boolean {
  const agora = new Date();
  const hora = agora.getHours();
  
  return hora >= 9 && hora < 17;
}

// Verificar prazo de cancelamento
export function podeCancelar(agendamento: { data: string; horario: string }): boolean {
  const agora = new Date();
  const dataAgendamento = new Date(agendamento.data);
  
  // Se nÃ£o Ã© o mesmo dia, pode cancelar
  if (dataAgendamento.toDateString() !== agora.toDateString()) {
    return true;
  }
  
  const horaAtual = agora.getHours();
  const minutoAtual = agora.getMinutes();
  const minutosTotais = horaAtual * 60 + minutoAtual;
  
  if (agendamento.horario === '09:15') {
    // Pode cancelar atÃ© 8:30 (510 minutos)
    return minutosTotais < 510;
  } else {
    // Pode cancelar atÃ© 14:30 (870 minutos)
    return minutosTotais < 870;
  }
}
```

---

## ğŸ”’ SEGURANÃ‡A

### Medidas Implementadas

| Medida | ImplementaÃ§Ã£o |
|--------|---------------|
| **Senha hashada** | bcrypt com salt rounds = 10 |
| **Session token** | JWT com expiraÃ§Ã£o ao fechar navegador |
| **Cookie seguro** | HttpOnly, Secure, SameSite=Strict |
| **Rate limiting** | 5 tentativas de login por minuto |
| **ValidaÃ§Ã£o server-side** | Todas as regras validadas no backend |
| **SQL Injection** | Prevenido pelo Supabase client |
| **XSS** | React escapa automaticamente |
| **CSRF** | SameSite cookie + verificaÃ§Ã£o de origin |

### Middleware de AutenticaÃ§Ã£o

```typescript
// middleware.ts
import { NextResponse } from 'next/server';
import type { NextRequest } from 'next/server';

export function middleware(request: NextRequest) {
  const session = request.cookies.get('session');
  const isAuthRoute = request.nextUrl.pathname.startsWith('/dashboard');
  
  if (isAuthRoute && !session) {
    return NextResponse.redirect(new URL('/', request.url));
  }
  
  return NextResponse.next();
}

export const config = {
  matcher: ['/dashboard/:path*']
};
```

---

## ğŸ“ ESTRUTURA DE PASTAS

```
cartorio-web/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”œâ”€â”€ page.tsx                    # Login
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”œâ”€â”€ page.tsx                # Dashboard (tabs)
â”‚   â”‚   â””â”€â”€ novo/
â”‚   â”‚       â”œâ”€â”€ page.tsx            # Novo agendamento
â”‚   â”‚       â”œâ”€â”€ confirmar/
â”‚   â”‚       â”‚   â””â”€â”€ page.tsx        # ConfirmaÃ§Ã£o
â”‚   â”‚       â””â”€â”€ sucesso/
â”‚   â”‚           â””â”€â”€ page.tsx        # Sucesso
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ auth/
â”‚       â”‚   â””â”€â”€ login/route.ts
â”‚       â”œâ”€â”€ agendamentos/
â”‚       â”‚   â”œâ”€â”€ route.ts
â”‚       â”‚   â””â”€â”€ [id]/
â”‚       â”‚       â”œâ”€â”€ route.ts
â”‚       â”‚       â””â”€â”€ cancelar/route.ts
â”‚       â”œâ”€â”€ calendario/route.ts
â”‚       â”œâ”€â”€ recibos/
â”‚       â”‚   â”œâ”€â”€ route.ts
â”‚       â”‚   â””â”€â”€ [id]/pdf/route.ts
â”‚       â”œâ”€â”€ logs/route.ts
â”‚       â”œâ”€â”€ indisponibilidades/route.ts
â”‚       â””â”€â”€ feriados/route.ts
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                         # Componentes base
â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”œâ”€â”€ input.tsx
â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â”œâ”€â”€ modal.tsx
â”‚   â”‚   â”œâ”€â”€ tabs.tsx
â”‚   â”‚   â””â”€â”€ calendar.tsx
â”‚   â”œâ”€â”€ login-form.tsx
â”‚   â”œâ”€â”€ dashboard-header.tsx
â”‚   â”œâ”€â”€ calendario-mensal.tsx
â”‚   â”œâ”€â”€ lista-agendamentos.tsx
â”‚   â”œâ”€â”€ lista-recibos.tsx
â”‚   â”œâ”€â”€ lista-logs.tsx
â”‚   â”œâ”€â”€ form-agendamento.tsx
â”‚   â””â”€â”€ modal-cancelamento.tsx
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase.ts                 # Cliente Supabase
â”‚   â”œâ”€â”€ resend.ts                   # Cliente Resend
â”‚   â”œâ”€â”€ viacep.ts                   # IntegraÃ§Ã£o ViaCEP
â”‚   â”œâ”€â”€ feriados.ts                 # IntegraÃ§Ã£o Brasil API
â”‚   â”œâ”€â”€ gerar-recibo-pdf.tsx        # GeraÃ§Ã£o de PDF
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ date.ts                 # UtilitÃ¡rios de data
â”‚       â”œâ”€â”€ format.ts               # FormataÃ§Ã£o
â”‚       â””â”€â”€ validation.ts           # Schemas Zod
â”‚
â”œâ”€â”€ emails/                         # Templates de email
â”‚   â”œâ”€â”€ novo-agendamento.tsx
â”‚   â”œâ”€â”€ cancelamento.tsx
â”‚   â””â”€â”€ recibo-disponivel.tsx
â”‚
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts                    # TypeScript types
â”‚
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ logo-cartorio.png
â”‚   â””â”€â”€ logo-seu-motorista-vip.png
â”‚
â”œâ”€â”€ .env.local                      # VariÃ¡veis de ambiente
â”œâ”€â”€ next.config.js
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ tsconfig.json
â””â”€â”€ package.json
```

---

## âš™ï¸ VARIÃVEIS DE AMBIENTE

```env
# .env.local

# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=xxx
SUPABASE_SERVICE_ROLE_KEY=xxx

# Resend
RESEND_API_KEY=re_xxx

# Auth
AUTH_PASSWORD_HASH=xxx # bcrypt hash de "123"
JWT_SECRET=xxx

# App
NEXT_PUBLIC_APP_URL=https://cartorio.seumotoristavip.com.br
```

---

## ğŸš€ DEPLOY (Vercel)

### ConfiguraÃ§Ã£o

1. Conectar repositÃ³rio GitHub
2. Configurar variÃ¡veis de ambiente
3. Deploy automÃ¡tico em push para main

### DomÃ­nio

- Configurar DNS do `cartorio.seumotoristavip.com.br`
- Apontar CNAME para Vercel
- SSL automÃ¡tico

---

## âœ… CHECKLIST DE IMPLEMENTAÃ‡ÃƒO

### Fase 1: Setup
- [ ] Criar projeto Next.js 14
- [ ] Configurar TypeScript
- [ ] Configurar TailwindCSS
- [ ] Criar projeto Supabase
- [ ] Executar scripts SQL
- [ ] Configurar Resend

### Fase 2: AutenticaÃ§Ã£o
- [ ] Tela de login
- [ ] API de autenticaÃ§Ã£o
- [ ] Middleware de proteÃ§Ã£o
- [ ] Session management

### Fase 3: Dashboard
- [ ] Layout com tabs
- [ ] Aba CalendÃ¡rio
- [ ] Aba Agendamentos
- [ ] Aba Recibos
- [ ] Aba HistÃ³rico

### Fase 4: Agendamento
- [ ] FormulÃ¡rio de novo agendamento
- [ ] IntegraÃ§Ã£o ViaCEP
- [ ] Tela de confirmaÃ§Ã£o
- [ ] Tela de sucesso
- [ ] ValidaÃ§Ã£o de conflitos

### Fase 5: Cancelamento
- [ ] BotÃ£o de cancelar
- [ ] Modal de confirmaÃ§Ã£o
- [ ] ValidaÃ§Ã£o de prazo
- [ ] AtualizaÃ§Ã£o de status

### Fase 6: Emails
- [ ] Template novo agendamento
- [ ] Template cancelamento
- [ ] Template recibo disponÃ­vel
- [ ] Envio via Resend

### Fase 7: Recibos
- [ ] Listagem de recibos
- [ ] GeraÃ§Ã£o de PDF
- [ ] Download de PDF
- [ ] Mensagem "confeccionando"

### Fase 8: IntegraÃ§Ãµes
- [ ] API de feriados
- [ ] CalendÃ¡rio com feriados
- [ ] Dias indisponÃ­veis do motorista

### Fase 9: FinalizaÃ§Ã£o
- [ ] Testes
- [ ] Responsividade
- [ ] Performance
- [ ] Deploy Vercel

---

## ğŸ“ CONTATOS DO PROJETO

| Papel | Nome | Contato |
|-------|------|---------|
| **Desenvolvedor** | Bruno Sena | brunosena.andrade@gmail.com |
| **Cliente** | 2Âº Tabelionato | contato@2tt.com.br |

---

*Documento gerado em: Dezembro 2025*
*VersÃ£o: 1.0*
